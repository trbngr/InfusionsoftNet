//----------------------
// <auto-generated>
// </auto-generated>
//----------------------
using System.Runtime.Serialization;

using LanguageExt;
using Newtonsoft.Json;

namespace Infusio.Model
{
    {% for e in Enums %}
    {% if e.HasDescription -%}
      /// <summary>
      /// {Description}
      /// </summary>
      {% endif %}
      public enum {{ e.Name | normalize }}
      { {% for value in e.Values %}
        [EnumMember(Value = "{{ value }}")]
        {{ value | normalize | firstupper }}{% if forloop.last == false %},{% endif %}
        {% endfor -%}
      }
    {% endfor -%}

    {% for def in Definitions %}
    public class {{ def.Name | normalize }} : Record<{{ def.Name | normalize }}>
    {
      {% for prop in def.Properties -%}
      [JsonProperty("{{ prop.JsonProperty }}")]
      public readonly {{ prop.OptionalTypeName }} {{ prop.Name | normalize }};
      {% endfor -%}

      public {{ def.Name | normalize }}({% for prop in def.Properties -%}{{ prop.OptionalTypeName }} {{ prop.VariableName }} = default{% if forloop.last == false %}, {% endif %}{% endfor %})
      {
        {% for prop in def.Properties -%}
        {{ prop.Name | normalize }} = {{ prop.VariableName }};
        {% endfor %}
      }

      public {{ def.Name | normalize }} Copy({% for prop in def.Properties -%}{{ prop.OptionalTypeName }} {{ prop.VariableName }} = default{% if forloop.last == false %}, {% endif %}{% endfor %}) => new {{ def.Name | normalize }}(
      {% for prop in def.Properties -%}
      {% if prop.IsOptionalType -%}
      {{ prop.VariableName }}:  {{ prop.VariableName }} ?? {{ prop.Name | normalize }}{% if forloop.last == false %}, {% endif %}
      {% else -%}
      {{ prop.VariableName }}:  {{ prop.VariableName }} == default ? {{ prop.Name | normalize }} : {{ prop.VariableName }}{% if forloop.last == false %}, {% endif %}
      {% endif -%}
      {% endfor %}
      );
    }
    {% endfor %}
}